# 원격 호스트를 향한 패킷 경로 표시하기

`tracepath`나 `traceroute` 명령어를 사용하여 원격 호스트를 향한 네트워크 경로 확인 가능.

- 인터넷은 중앙 호스트가 없고 라우팅 기능을 하는 호스트가 자신이 받은 패킷을 다음 호스트로 넘기고 이 과정의 연계에 따라서 최종 호스트에 도착하는 방식을 사용한다.
- 위와 같은 이유로 결과는 보장하지 않지만 노력은 한다는 **Best Effort** 방식을 이용한다.
- 일정 횟수 이상 라우터를 통과해도 패킷이 도착하지 못하는 경우 패킷이 쌓여서 통신장애가 발생하는 현상을 방지하기 위해 삭제
  - hop 단위로 셈하고 페킷이 폐기 될때까지의 홉 개수를 TTL(Time to Live) 라고 한다.


> 최근에는 보안 목적으로 ICMP 패킷을 막은 라우터도 많아서 tracepath(traceroute) 명령어가 동작하지 않을 수 있다.

```console
$ traceroute www.google.com
traceroute to www.google.com (142.250.207.100), 64 hops max, 52 byte packets
 1  192.168.0.1 (192.168.0.1)  5.505 ms  2.932 ms  2.826 ms
 2  * * *
 3  112.190.16.25 (112.190.16.25)  4.851 ms  3.589 ms  3.441 ms
 4  112.190.6.69 (112.190.6.69)  8.789 ms
    112.190.2.85 (112.190.2.85)  9.117 ms
    112.190.1.189 (112.190.1.189)  7.887 ms
 5  * * *
 6  112.174.90.26 (112.174.90.26)  12.753 ms
    112.174.90.170 (112.174.90.170)  10.580 ms
    112.174.90.50 (112.174.90.50)  11.599 ms
 7  112.174.84.58 (112.174.84.58)  25.347 ms
    112.174.84.42 (112.174.84.42)  23.267 ms
    112.174.84.30 (112.174.84.30)  13.423 ms
 8  142.250.165.78 (142.250.165.78)  31.504 ms  32.426 ms  31.990 ms
 9  * * *
10  108.170.242.193 (108.170.242.193)  38.506 ms  36.976 ms
    216.239.43.50 (216.239.43.50)  34.752 ms
11  108.170.242.209 (108.170.242.209)  36.717 ms
    kix06s11-in-f4.1e100.net (142.250.207.100)  31.886 ms
    108.170.242.146 (108.170.242.146)  34.330 ms
```

## `tracepath` 옵션

|옵션|설명|
|-|-|
|-n|주소를 IP로 표시|
|-l _plen_|패킷 길이를 _plen_ 으로 지정|


## `traceroute` 옵션


|옵션|설명|
|-|-|
|-n|주소를 IP로 표시|
|-m _maxttl_|최대 TTL을 _maxttl_ 로 설정|
|-p _port_|UDP 패킷을 port로 전송|
|-I|UDP 패킷 대신 ICMP 패킷 전송|
