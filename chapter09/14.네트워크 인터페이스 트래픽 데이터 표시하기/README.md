# 네트워크 인터페이스 트래픽 데이터 표시하기
- 네트워크 인터페이스에서 트래픽 데이터를 취득하려면 tcpdump 명령어를 사용

## 사용 예
원격 호스트 ftp.example.com에서 로콜 호스트 21번 포트로 보내는 패킷을 취득
```
# tcpdump port 21 and src host ftp.example.com
```
취득한 패킷 정보를 tcpdump.log 파일에 저장
```
# tcpdump -w tcpdump.log
```
tcpdump.log 파일에 저장된 패킷 정보를 확인
```
# tcpdump -r tcpdump.log
```

## 주요 옵션
| 옵션 | 설명 |
|---|---|
| -c ***count*** | ***count*** 개 패킷을 취득하고 종료 |
| -F ***file*** | 패킷 필터링 조건을 ***file*** 파일에서 읽음 |
| -i ***if*** | 인터페이스 ***if***를 지정 |
| -n | IP 주소/포트 번호를 호스트명/서비스명으로 변환하지 않음 |
| -N | 호스트명 중에 도메인명을 표시하지 않음 |
| -q | 일부 정보를 제외한 형식으로 표시 |
| -r ***wfile*** | 패킷을 ***wfile*** 파일에서 읽음. ***wfile***에 -를 지정하면 표준 입력에서 패킷을 읽음 |
| -T ***type*** | 취득한 패킷을 패킷 종류 ***type***으로 해석. ***type***에는 cnfp, rpc, rtp, rtcp, snmp, vat, wb 등이 존재 |
| -v | 상세 정보를 표시 |
| -vv | -v보다 더 상세한 정보를 표시 |
| -vvv | -vv보다 더 상세한 정보를 표시 |
| -w ***wfile*** | 수신한 패킷을 ***wfile*** 파일로 저장 |

## 조건
- 패킷 취득 조건을 지정
- '형식 패킷진행방향 프로토콜' 순서를 지정
- 여러 조건을 조합해서 복잡한 조건도 만들 수 있음

[ 형식 ]
| 형식명 | 설명 | 사용 예|
|---|---|---|
| host ***host*** | 호스트명 또는 IP 주소 ***host*** | host examle.com, host 10.0.0.10 |
| net ***net*** [mask ***mask***] | 네트워크 주소 ***net*** 서브넷마스크 ***mask*** | net 10.0.0.0, net 10.2.0.0 mask 255.255.240.0 |
| port ***port*** | 포트 번호 또는 서비스명 port | port 21, port ftp |

[ 패킷 송신 방향 ]
| 작성법 | 설명 |
|---|---|
| src ***type*** | 패킷 발신지 형식 ***type*** |
| dst ***type*** | 패킷 도착지 형식 ***type*** |

[ 논리 연산자 ]
| 연산자 | 설명 |
|---|---|
| and | 두 조건을 동시에 만족 |
| or | 두 조건 중 하나만 만족해도 됨 |
| not | 조건과 일치하지 않음 |

[ 프로토콜 ]
| 프로토콜명 | 설명 |
|---|---|
| ether | 이더넷 |
| ip | IP(IPv4) |
| ip6 | IP(IPv6) |
| arp | ARP |
| tcp | TCP |
| udp | UDP |
| icmp | ICMP |
| icmp6 | ICMP6 |